<!-- Filters -->
<div class="filters">
  <!-- Search -->
  <input
    type="text"
    placeholder="ğŸ” Search by title, author, or keyword"
    [(ngModel)]="filters.search"
    (ngModelChange)="onFilterChange()"
  />

  <!-- Main Category -->
  <select [(ngModel)]="filters.mainCategory" (change)="onFilterChange()">
    <option value="">ğŸ“š Select Category</option>
    <option value="School">School</option>
    <option value="College">College</option>
    <option value="Medical">Medical</option>
    <option value="Others">Others</option>
  </select>

  <!-- School Class -->
  <select *ngIf="filters.mainCategory === 'School'" [(ngModel)]="filters.schoolClass" (change)="onFilterChange()">
    <option value="">ğŸ“ Select Class</option>
    <option *ngFor="let c of schoolClasses" [value]="c">{{ c }}</option>
  </select>

  <!-- Board -->
  <select *ngIf="filters.mainCategory === 'School'" [(ngModel)]="filters.board" (change)="onFilterChange()">
    <option value="">ğŸ« Select Board</option>
    <option *ngFor="let b of boards" [value]="b">{{ b }}</option>
  </select>

  <!-- College Level -->
  <select *ngIf="filters.mainCategory === 'College'" [(ngModel)]="filters.collegeLevel" (change)="onFilterChange()">
    <option value="">ğŸ“ Select College Level</option>
    <option *ngFor="let l of collegeLevels" [value]="l">{{ l }}</option>
  </select>

  <!-- Stream -->
  <select *ngIf="filters.collegeLevel === '+2'" [(ngModel)]="filters.stream" (change)="onFilterChange()">
    <option value="">ğŸ“– Select Stream</option>
    <option *ngFor="let s of streams" [value]="s">{{ s }}</option>
  </select>

  <!-- Course -->
  <select *ngIf="filters.collegeLevel === '+3'" [(ngModel)]="filters.course" (change)="onFilterChange()">
    <option value="">ğŸ“˜ Select Course</option>
    <option *ngFor="let c of courses" [value]="c">{{ c }}</option>
  </select>

  <!-- Honours -->
  <select *ngIf="filters.course === 'BSc' || filters.course === 'BA' || filters.course === 'BCom'" 
          [(ngModel)]="filters.honors" (change)="onFilterChange()">
    <option value="">â­ Select Honours</option>
    <option *ngFor="let h of honors" [value]="h">{{ h }}</option>
  </select>

  <!-- Medical Course -->
  <select *ngIf="filters.mainCategory === 'Medical'" [(ngModel)]="filters.medicalCourse" (change)="onFilterChange()">
    <option value="">ğŸ’Š Select Medical Course</option>
    <option *ngFor="let m of medicalCourses" [value]="m">{{ m }}</option>
  </select>

  <!-- Others -->
  <select *ngIf="filters.mainCategory === 'Others'" [(ngModel)]="filters.othersCategory" (change)="onFilterChange()">
    <option value="">ğŸ“‚ Select Category</option>
    <option *ngFor="let o of othersCategories" [value]="o">{{ o }}</option>
  </select>

  <!-- Price Range -->
  <input type="number" placeholder="â‚¹ Min Price" [(ngModel)]="filters.minPrice" (ngModelChange)="onFilterChange()" />
  <input type="number" placeholder="â‚¹ Max Price" [(ngModel)]="filters.maxPrice" (ngModelChange)="onFilterChange()" />

  <!-- Format -->
  <select [(ngModel)]="filters.format" (change)="onFilterChange()">
    <option value="">ğŸ“– Select Format</option>
    <option value="Hardcover">Hardcover</option>
    <option value="Paperback">Paperback</option>
    <option value="Ebook">Ebook</option>
    <option value="PDF">PDF</option>
  </select>

   <button type="button" class="clear-btn" (click)="clearFilters()">
    Clear All
  </button>
</div>

<div class="books-grid">
  <div class="book-card" *ngFor="let book of books">
    <img [src]="'https://localhost:7231' + book.imageUrl" alt="{{ book.title }}" />
    <h3>{{ book.title }}</h3>
    <p class="author">{{ book.author }}</p>
    <p class="price"><strong>â‚¹{{ book.price }}</strong></p>

    <div class="card-actions">
      <a [routerLink]="['/books', book.id]" class="btn btn-outline-primary">
        <i class="bi bi-eye"></i> View Details
      </a>
      <button class="btn btn-success" (click)="addToCart(book)">
        <i class="bi bi-cart-plus"></i> Add to Cart
      </button>
    </div>

    <div *ngIf="isAdmin" class="admin-actions">

      <button class="btn btn-warning" (click)="onEdit(book.id)">
        <i class="bi bi-pencil-square"></i> Edit
      </button>

      <button class="btn btn-danger" (click)="onDelete(book.id)">
        <i class="bi bi-trash"></i> Delete
      </button>

    </div>

  </div>
  </div>